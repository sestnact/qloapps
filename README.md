<!-- DO NOT EDIT THIS FILE MANUALLY  -->
# Qloapps-Apache-PHP-FPM

Dockerize Qloapps Hotel Reservation System 

For more information see qloapps [website](https://qloapps.com/)

## Usage

Here are some example to help you get started creating a container, this image need external database.

### docker-compose 

Compatible with docker-compose v3 schemas with external database.

```yaml
---
version: "3.7"
services:
  app:
    image: sestnact/qloapps:latest
    container_name: qloapps-app
    ports:
      - 80:80
    depends_on:
      - db
    volumes:
      - /path/to/app-data:/var/www/qloapps
    restart: always

  db:
    image: mariadb:latest
    container_name: qloapps-db
    volumes:
      - /path/to/db-data:/var/lib/mysql
    environment:
      - MARIADB_ROOT_PASSWORD=root #change this for security reason
      - MARIADB_USER=qloapps_user
      - MARIADB_DATABASE=qloapps
      - MARIADB_PASSWORD=qloapps_password #change this for security reason
    restart: always
```
## Application Setup

Better setup domain name first or use nginx proxy manager and access through that domain that is already set.

Access the webui at `http://<your-domain>`, for more information check out below are the instructions for installing qloapps:

### Installation

#### On System configuration section change `Database server address` from `localhost` to `db` 
* Fill in the database section
* Database name= `MARIADB_DATABASE`
* Database login= `MARIADB_USER`
* Database password= `MARIADB_PASSWORD`
* Test your database connection if `OK` your good to go 

#### After qloapps installation, remove `install` directory from host `/path/to/app-data/` directory.
* On host terminal run: `rm -rf /path/to/app-data/install`

#### On clicking backoffice URL, you will be prompted to rename your backoffice URL.

Go to host terminal and change the name of admin directory as mentioned.

* Example: `http://<your-domain>/admin984blk8yu`

* On host terminal run: `mv /path/to/app-data/admin984blk8yu /path/to/app-data/admin-backoffice`

* And then access your `http://<your-domain>/admin-backoffice`

### Additional

#### To prevent admin logout you need to `disable` Check the cookie's IP address.

The configuration is located at: `Administration > Preferences > Check the cookie's IP address` and then disable it.

### SMTP Configuration

The configuration is located at: `Advanced Parameters > E-mail > Select Set my own SMTP parameters`

* Example using gmail smtp:
* Mail domain name: `leave it blank`
* SMTP server: `smtp.gmail.com`
* SMTP username: `username@gmail.com`
* SMTP password: `username password`
* Encryption: `TLS`
* Port: `587`

### Update Container

* Update the image: `docker pull sestnact/qloapps`
* Stop the running container: `docker stop qloapps-app`
* Delete the container: `docker rm qloapps-app`
* Recreate a new container with the same docker run parameters as instructed above (if mapped correctly to a host folder, your `/var/www/qloapps` folder and settings will be preserved)
* You can also remove the old dangling images: `docker image prune`
* And create container with: `docker-compose up -d`
